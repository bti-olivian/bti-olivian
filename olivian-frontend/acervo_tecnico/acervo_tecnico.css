/* ===============================
¬†FONTES
================================ */
@font-face {
font-family: 'Inter';
src: url('fonts/Inter-VariableFont_opsz,wght.ttf') format('truetype');
/* üí° Melhoria: Adicionado 'font-display: swap' para melhor performance de carregamento (evita o FOUT) */
font-display: swap; 
}

/* ======================== */
/* 1. Estilos Globais e do Corpo */
/* ======================== */
:root {
/* Cores de Texto e Fundo */
--text-color-light: #cfcfcf;
--text-color-dark: #333;
/* üí° Melhoria: Cor de BG do Card ajustada para ser um pouco mais opaca para legibilidade */
--bg-card-hover: rgba(255, 255, 255, 0.15); 
--bg-card-dark: #FCFCFC;
--border-color: rgba(255, 255, 255, 0.18);
--bg-principal: #f4f4f4;
--primary-color: #6a11cb; /* Cor prim√°ria gen√©rica (roxo) */

/* Cores OLIVIAN */
--cor-olvian-primaria: #9D3972; 
--cor-alerta: #FF9800;
--cor-erro: #dc3545;
--cor-info: #007bff;
--cor-fundo-hover: #F8F4F7;
/* üí° Nova Vari√°vel: Para o cinza padr√£o de √≠cones/textos neutros */
--color-neutral-text: #6c757d; 
}

html, body {
margin: 0;
padding: 0;
font-family: 'Inter', Helvetica, sans-serif;
background-color: var(--bg-principal);
/* üí° Corre√ß√£o: Usar min-height: 100vh permite que o conte√∫do cres√ßa al√©m da tela se necess√°rio. */
height: 100%; 
color: var(--text-color-dark);
/* üí° Ajuste: 'bold' pode ser muito forte. Sugest√£o: '600' ou 'normal' para o corpo, e 'bold' apenas em t√≠tulos. */
overflow: hidden; 
/* üí° Ajuste: Removido 'overflow: hidden' do body para evitar problemas com modais/tooltips que precisam de scroll.
¬†A restri√ß√£o de overflow deve ser aplicada apenas √† 'content-area'. */
}

/* ======================== */
/* 2. Layout Principal */
/* ======================== */
.main-container {
display: flex;
/* üí° Ajuste: Garante que o container ocupe a altura total dispon√≠vel no viewport */
height: 100%; 
}

/* ======================== */
/* 3. Sidebar (Barra Lateral) */
/* ======================== */
.sidebar {
width: 200px;
background-color: #fcfcfc;
padding: 10px;
box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
color: var(--text-color-dark);
display: flex;
flex-direction: column;
justify-content: space-between;
}

.sidebar-header {
text-align: center;
display: flex;
flex-direction: column;
align-items: center;
margin-top: -10px;
}

.sidebar-logo {
width: 250px;
margin-left: -20px;
}

.sidebar-nav ul {
list-style: none;
padding: 0;
margin: 0;
}

.sidebar-nav {
margin-bottom: 5px;
margin-top: -25px;
}

.sidebar-nav .nav-item img {
opacity: 0.3;
transition: opacity 0.3s ease;
}

.sidebar-nav .nav-item:hover img {
opacity: 1;
}

.sidebar-nav .nav-item:hover a {
color: rgb(0, 0, 0,0.5);
}

.sidebar-nav .nav-item.active a {
color: #9D3972;
}

.sidebar-nav .nav-item.active img {
opacity: 1;
}

.sidebar-divider {
width: 5px;
height: 100%;
background-image: url('../Imagens/fundo_sistema.png');
background-repeat: no-repeat;
background-size: 100% 100%;
background-position: center;
}

.nav-item a {
display: flex;
align-items: center;
padding: 17px 15px;
color: #b1b1b1;
text-decoration: none;
border-radius: 8px;
transition: background-color 0.3s ease;
font-weight: bold;
font-size: 12px;
}

.nav-item a:hover {
background-color: var(--bg-card);
}

.nav-item img {
width: 20px;
margin-right: 10px;
}

.sidebar-footer {
text-align: center;
margin-top: auto;
display: flex;
flex-direction: column;
align-items: center;
}

.footer-logo {
width: 80px;
}


/* ======================== */
/* 4. √Årea de Conte√∫do Principal */
/* ======================== */
.content-area {
flex-grow: 1;
background-color: var(--bg-principal);
/* üí° Corre√ß√£o: 'overflow-y: auto' para permitir scroll apenas na √°rea de conte√∫do se necess√°rio. */
overflow-y: hidden; 
display: flex;
flex-direction: column;
}


/* --- Content Header (Topo da Aplica√ß√£o) --- */
.content-header {
display: flex;
justify-content: space-between;
align-items: center;
color: var(--text-color-dark);
background-color: #FCFCFC;
width: 100%;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
padding: 7px 0;
margin-top: -3px;
}

.user-profile {
padding-right: 20px;
font-size: 10px;
color: #2E0470;
font-weight: normal;
text-align: right;
}

.user-profile-name {
font-size: 15px;
font-weight: bold;
}

.client-profile {
padding-left: 20px;
font-size: 10px;
color: #2E0470;
font-weight: normal;
}

.client-profile-name {
font-size: 25px;
font-weight: bold;
}

.content-header .client-profile span,
.content-header .user-profile span {
display: block;
}

/* Efeitos de Fade-in */
.client-profile, .user-profile, .card-number {
opacity: 0;
transition: opacity 0.4s ease-in-out;
}


/* Se√ß√£o de M√©tricas */
.metrics-section {
display: flex;
gap: 7px; /* Ajuste para espa√ßamento mais comum */
}

.metrics-card {
background-color: #FCFCFC;
padding: 10px 0px; /* Ajuste de padding */
border-radius: 10px;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Sombra mais sutil */
display: flex;
flex-direction: column;
align-items: center;
text-align: center;
flex: 1;
min-width: 120px; /* Ajustado para ser mais flex√≠vel */
}

.metrics-card img {
width: 40px; /* Leve ajuste no √≠cone */
margin-bottom: 10px;
}

.card-title {
font-size: 11px; /* Leve aumento para legibilidade */
color: #9C9C9C;
margin-bottom: 5px;
text-transform: none;
}

.card-number {
font-size: 40px; /* Leve ajuste no n√∫mero */
font-weight: bold;
color: #9D3972;
}

/* Estrutura de Colunas */
.main-content-flex {
display: flex;
flex-direction: row;
gap: 10px;
height: 100%;
padding: 10px 12px; /* Ajuste de padding na parte inferior */
}

.left-column {
display: flex;
flex-direction: column;
width: 250px; /* Leve aumento para acomodar mais conte√∫do */
flex-shrink: 0;
}

.right-column {
display: flex;
flex-direction: column;
flex-grow: 1;
gap: 10px;
min-width: 0;
}

/* Card Acervo T√©cnico */
.acervo-tecnico-card {
background-image: url('../Imagens/fundo_sistema.png');
background-size: cover;
color: white;
border-radius: 10px 10px 0 0;
padding: 21px; /* Ajuste de padding */
height: 94px; /* Ajuste de altura */
display: flex;
flex-direction: column;
justify-content: center;
}

.acervo-tecnico-card .card-title {
color: white;
font-size: 26px;
font-weight: 700;
text-align: center;
width: 100%;
}

.acervo-tecnico-card .card-info {
text-align: right;
margin-top: 20px;
}

.acervo-tecnico-card .card-number {
color: white;
font-size: 50px;
}

.acervo-tecnico-card .card-description {
color: white;
font-size: 12px;
display: block;
font-weight: 100;
margin-top: -10px;
}

/* Lista de Normas */
.acervo-content-full {
flex-grow: 1;
display: flex;
flex-direction: column;
background-color: #fcfcfc;
padding: 7px; /* Ajuste de padding */
border-radius: 0 0 10px 10px;
min-height: 0;
}

.search-box {
width: 100%;
position: relative;
margin-bottom: 15px; /* Ajuste de margem */
}

.search-icon {
position: absolute;
top: 50%;
left: 12px; /* Ajuste de posi√ß√£o */
transform: translateY(-50%);
width: 18px; /* Leve ajuste */
opacity: 0.5;
pointer-events: none;
}

.search-box input {
background-color: rgba(217, 217, 217, 0.3);
padding: 8px 8px 8px 35px; /* Ajuste do padding para o √≠cone */
border: 1px solid transparent; /* Borda sutil */
border-radius: 10px;
width: 100%;
box-sizing: border-box;
font-size: 11px;
color: black;
text-align: left;
transition: all 0.2s ease-in-out;
}

.search-box input::placeholder {
text-align: center;
transition: all 0.2s ease-in-out;
}

.search-box input:focus::placeholder {
opacity: 0;
}

.normas-list-container {
flex-grow: 1;
overflow-y: auto;
height: 70px;
/* üí° Corre√ß√£o: Removido 'height: 70px;' pois flex-grow: 1 j√° define a altura no layout flex√≠vel */
overflow-x: hidden;
}

.norma-item {
display: flex;
align-items: center;
padding: 4px; /* Ajuste de padding */
border-radius: 8px;
margin-bottom: 12px; /* Ajuste de margem */
cursor: pointer;
transition: transform 0.2s ease, background-color 0.2s ease;
font-size: 12px;
font-weight: bold;
}

.normas-header {
margin-bottom: -5px; /* Ajuste de margem */
}

.norma-item:hover, .norma-item.active {
background-color: #fcfcfc;
transform: translateX(5px); /* Movimento mais sutil */
}

.status-bolinha {
width: 10px; /* Leve ajuste */
height: 10px; /* Leve ajuste */
border-radius: 50%;
flex-shrink: 0;
margin-right: 4px;
}

.status-atualizado { background-color: #28a745; }
.status-desatualizado { background-color: #dc3545; }

/* Detalhes da Norma */
.norma-details-container {
flex-grow: 1;
background-color: var(--bg-card-dark); /* üí° Usando vari√°vel */
padding: 35px; /* Aumento do padding */
border-radius: 10px;
box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
overflow-y: hidden; /* Permite scroll no conte√∫do se for muito longo */
margin-bottom: 0px;
}

.details-header {
display: flex;
justify-content: space-between;
align-items: center; /* Alinhamento superior */
margin-bottom: 10px;
}

.details-header h2 {
font-size: 28px;
color: rgba(0, 0, 0, 0.85);;
font-weight: bold;
margin: 8px 0px;
}

.details-buttons { display: flex; align-items: center; gap: 20px; }
.details-buttons button { background: none; border: none; cursor: pointer; padding: 0; }
.norma-label { font-size: 24px; font-weight:bold; } /* Destaque */
.favs-icon { width: 26px; height: 26px; stroke: #6c757d; fill: none; transition: all 0.2s ease-in-out; }
#favorite-btn.favorita .favs-icon { fill: #ffc107; stroke: #ffc107; }
#favorite-btn:hover .favs-icon { transform: scale(1.15); }
.comment-count-container { display: flex; align-items: center; gap: 5px; cursor: pointer; }
.comment-icon { width: 26px; height: auto; }
.comment-count { font-size: 26px; font-weight: bold; color: rgba(0, 0, 0, 0.5); }

.details-content { display: flex; flex-direction: column; gap: 18px; }
.info-description { font-weight: bold; font-size: 15px; }
.info-idioma { font-size: 12px; }
.info-label-atual, .info-label-cliente { font-weight: bold; font-size: 15px; }
.info-label-atual { color: #360AFA; }
.status-group { display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: bold; }
.info-label-obs { font-weight: bold; font-size: 12px; }
.info-value { font-size: 11px; font-weight:200; }

.selection-fields-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 40px; }
.field-group { display: flex; flex-direction: column; gap: 8px; }
.add-label { font-size: 12px; font-weight: bold; color: #888; }
/* .custom-select { ... seus estilos de custom-select ... } */

/* ======================================================= */
/* POPUP E FORMUL√ÅRIO (Modais) */
/* ======================================================= */
.modal-overlay { 
display: none; 
position: fixed; 
z-index: 1000; 
left: 0; 
top: 0; 
width: 100%; 
height: 100%; 
background-color: rgba(0, 0, 0, 0.7); /* Fundo mais escuro para destaque */
justify-content: center; 
align-items: center; 
}
.modal-content-large { 
background-color: #fff; 
padding: 30px; /* Leve aumento */
border-radius: 10px; 
box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4); 
width: 100%; 
max-width: 950px; /* Aumento do max-width para melhor uso do espa√ßo */
height: 80%; /* Altura m√°xima para melhor visualiza√ß√£o do conte√∫do interno */
max-height: 95%; /* Garante que n√£o ultrapasse a tela */
display: flex;
flex-direction: column;
position: relative; 
overflow: hidden;
}
.modal-grid { 
display: grid; 
grid-template-columns: 350px 1fr; /* Coluna de formul√°rio com largura fixa */
gap: 30px;
flex: 1; /* Permite que a grade preencha o espa√ßo restante */
height: 100%;
min-height: 0;
}
.modal-col-form { 
border-right: 1px solid #f0f0f0; 
padding-right: 30px; 
display: flex;
flex-direction: column;
}
.modal-col-list {
overflow: auto;
display: flex;
flex-direction: column;
flex: 1;
min-height: 100%;
}

.close-button { 
position: absolute; 
top: 15px; 
right: 15px; 
font-size: 24px; 
font-weight: normal; 
color: #888; 
background: none; 
border: none; 
cursor: pointer; 
padding: 5px;
line-height: 1;
}
.close-button:hover { color: #333; transform: rotate(90deg); transition: transform 0.3s; }
.modal-content-large h2 { 
margin-top: 0; 
margin-bottom: 10px; 
color: #333; 
font-size: 20px;
margin-right: 15px;
}
.form-group { margin-bottom: 12px; }
.form-group label { 
display: block; 
margin-bottom: 4px; 
font-weight: 600; 
color: #555; 
font-size: 13px;
}
.form-group input, .form-group textarea, .custom-select { 
font-family: 'Inter', Helvetica, sans-serif; 
width: 100%; 
padding: 10px; 
border: 1px solid #ddd; 
border-radius: 6px; 
font-size: 13px; 
box-sizing: border-box; 
transition: border-color 0.2s;
}
.form-group input:focus, .form-group textarea:focus {
border-color: var(--cor-olvian-primaria);
outline: none;
}
.form-group textarea { resize: vertical; min-height: 80px; }
.modal-actions { 
display: flex; 
justify-content: flex-end; 
gap: 10px; 
margin-top: 25px; 
padding-top: 15px;
border-top: 1px solid #f0f0f0;
}
.button-primary { 
background-color: var(--cor-olvian-primaria); 
color: white; 
border: none; 
padding: 10px 20px;
border-radius: 6px;
font-weight: 700; 
cursor: pointer; 
box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
transition: all 0.2s ease-in-out;
text-transform: uppercase;
font-size: 12px;
}

.button-primary:hover { 
background-color: #7A2859;
box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
transform: translateY(-1px);
}
.button-secondary { 
background-color: #f0f0f0; 
color: #555; 
border: 1px solid #ccc; 
padding: 10px 20px; 
border-radius: 6px; 
font-weight: 600; 
cursor: pointer;
font-size: 12px;
transition: background-color 0.2s;
}
.button-secondary:hover {
background-color: #e0e0e0;
}


/* ======================================================= */
/* LISTA DE COMENT√ÅRIOS NO POPUP (REFINAMENTO FINAL) */
/* ======================================================= */
.popup-item-list { 
flex: 1; 
    /* üéØ CORRE√á√ÉO 3: Removido max-height para permitir que o scroll funcione corretamente */
padding-right: 10px; 
padding-bottom: 20px; 
margin-top: 10px; 
}

/* Nome da norma no t√≠tulo do popup */
.norma-titulo-popup {
font-size: 0.8em; 
color: var(--cor-olvian-primaria);
font-weight: 700;
margin-left: 10px;
display: inline-block;
max-width: 65%; 
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
vertical-align: middle;
float: right; 
clear: right;
margin-top: 5px; 
}


/* üéØ CORRE√á√ÉO 2: Bloco Total (Thread-Container) - Organiza√ß√£o e Borda de Bloco */
.thread-container {
/* üéØ Borda para mostrar o bloco total do coment√°rio/thread */
border: 1px solid #e0e0e0; 
border-radius: 8px;
padding: 10px; /* Padding interno para separar as bolhas da borda */
margin-bottom: 15px;
box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05); 
background-color: #ffffff; /* Fundo branco para a thread */
display: flex;
flex-direction: column;
position: relative;
border-left: 2px solid #e0e0e0;
}

/* üéØ CORRE√á√ÉO 2.1: A BOLHA CINZA E SUAS LINHAS DE CONEX√ÉO */
.comentario-item { 
margin-bottom: 0px !important; 
padding: 8px 12px; 
border-radius: 10px; 
background-color: #f0f2f5; 
position: relative;
z-index: 5; 
max-width: 98%; /* üéØ Aumentado para preencher o bloco */
min-width: 250px;
margin-top: 5px; 
}

/* 2.1. Regra para COMENT√ÅRIOS FILHOS (RESPOSTAS) - Cria a linha VERTICAL √† esquerda */
.comentario-item[data-parent-id]:not([data-parent-id="null"]) { 
margin-top: 5px !important; 
margin-bottom: 0px !important; 
margin-left: 0 !important;
border-left: none; /* Linha vertical do filho */
border-radius: 10px;
padding-left: 12px;
/* AJUSTE AQUI: Reduz o max-width para coment√°rios filhos */
max-width: calc(98% - var(--comment-reply-margin, 60px)); /* Reduz a largura considerando o recuo */
/* Se voc√™ quer um min-width menor para filhos, defina aqui: */
min-width: 150px; /* Exemplo: define um m√≠nimo menor para filhos */ 
}

/* 2.2. LINHA HORIZONTAL (Quebra) no filho - Tampa a linha vertical para formar o "T" */
.comentario-item[data-parent-id]:not([data-parent-id="null"])::before {
content: '';
position: absolute;
top: 18px; 
left: -2px; /* Inicia antes da borda esquerda (linha vertical) */
width: 15px; 
height: 2px;
background-color: #f0f2f5; /* Cor da bolha para cobrir a linha */
z-index: 6; 
}

/* 2.3. Linha vertical do PAI para o primeiro FILHO (Apenas o item logo ap√≥s o PAI precisa da borda) */
.thread-container > .comentario-item:first-child + .comentario-item[data-parent-id]:not([data-parent-id="null"]) {
border-left: none; 
}

/* ======================================================= */
/* 2. TIPOGRAFIA E METADADOS (VISUAL NOVO) */
/* ======================================================= */

/* Remove elementos n√£o usados/duplicados */
.nome-norma, .comentario-descricao { display: none; }


/* üéØ CORRE√á√ÉO 3: Cabe√ßalho (Autor e Data) - Alinhamento e espa√ßamento */
.comentario-header { 
display: flex; 
justify-content: flex-start;
align-items:center; 
margin-bottom: 2px;
}

/* Autor */
.comentario-autor { 
font-weight: 700 !important; 
color: #333 !important;
font-size: 0.85em !important; 
margin-right: 48px; /* Mais espa√ßo */
}

.comentario-titulo-pai {
    font-weight: bold; /* Levemente menos negrito que o autor */
    color: #555;
    font-size: 0.85em;
    margin-right: auto; /* CR√çTICO: Empurra a data para a direita */
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 50%; /* Limita o tamanho do t√≠tulo para que a data caiba */
}

/* Data */
.comentario-data { 
font-size: 0.75em !important; 
color: #999 !important; 
font-weight: normal !important;
white-space: nowrap;
margin-left: auto;
}

/* Corpo do Coment√°rio */
.comentario-texto {
    margin: 3px 0 0 0; 
    font-size: 12px;
    text-align: justify; 
    word-wrap: break-word; 
    color: #555;
    word-break: break-word; 
    overflow-wrap: break-word;
}

/* üéØ CORRE√á√ÉO 1: A√ß√µes (Responder/Editar/Excluir) - Restaura Cores e Alinhamento */
.comentario-actions {
text-align: right; 
margin-top: 0px; 
margin-left: 20px; /* Alinhado com a borda esquerda da bolha PAI + padding do thread */
padding-bottom: 5px; 
position: relative; 
z-index: 10;
}

.thread-container > .comentario-actions:first-of-type {
margin-left: 20px; /* Alinhado sob a bolha PAI */
}

/* A√ß√µes em Coment√°rios Filhos - Usando a vari√°vel CSS do JS para sincronizar recuo */
.comentario-item[data-parent-id]:not([data-parent-id="null"]) + .comentario-actions {
    /* Usa a vari√°vel --comment-reply-margin (definida no JS) */
    margin-left: var(--comment-reply-margin); 
}

/* Estilo dos Bot√µes de A√ß√£o */
.action-btn { 
    background: none; border: none; cursor: pointer; padding: 5px; margin-left: 5px; line-height: 1; border-radius: 50%;
}
.action-btn.btn-reply {
    margin-left: 0;
    /* üéØ Restaura a cor azul do Responder (var(--cor-info) = #007bff) */
    color: var(--cor-info) !important;
    font-size: 0.7em !important;
    font-weight: 600 !important; 
    padding: 0 5px !important; 
    text-transform: capitalize !important;
}

/* üéØ Restaura a cor laranja do Editar */
.action-btn.btn-edit { color: var(--cor-alerta) !important; }
/* üéØ Restaura a cor vermelha do Excluir */
.action-btn.btn-delete { color: var(--cor-erro) !important; }

.action-btn:hover {
background-color: #f0f2f5;
transform: scale(1.1);
}

.action-btn.btn-reply:hover {
background: none !important; 
text-decoration: underline; 
transform: none !important;
}

.action-btn svg {
width: 16px;
height: 16px;
stroke-width: 2.5;
stroke: currentColor;
}

/* REGRAS DE SOBRESCRITA (MANUTEN√á√ÉO DE CLASSES ORIGINAIS) */
/* As margens negativas foram ajustadas para n√£o interferir no fluxo do layout. */
.comentario-item {
margin-top: 0 !important;
margin-bottom: 0 !important;
}

/* A caixa est√°tica de exemplo no HTML precisa ser ignorada, se ainda existir */
.comentario-item:last-of-type:not([data-thread-id]) {
display: none !important;
}

/* ... (restante dos estilos externos MANTIDOS) ... */
.comment-author { font-weight: bold; font-size: 0.9em; }
.comment-date { font-size: 0.6em; color: #888; }
.comment-actions { text-align: right; margin-top: 10px; }

#filtro-favoritas-btn, 
#filtro-todas-btn, 
#filtro-desatualizadas-btn, 
#filtro-comentadas-btn {
cursor: pointer;
}

/* ESTRELAS NA LISTA DE NORMAS */
.norma-item-content { display: flex; align-items: center; gap: 5px; width: 100%; }
.fav-icon-list { width: 16px; height: 16px; flex-shrink: 0; }
.favs-list-svg { width: 70%; height: 70%; stroke: #aaa; fill: none; transition: all 0.2s ease-in-out; }
.fav-icon-list.favorita .favs-list-svg { fill: #ffc107; stroke: #ffc107; }

/* MODAL SIMPLES (Vinculos) */
.modal-content {
background-color: #fff;
padding: 30px;
border-radius: 8px;
box-shadow: 0 5px 15px rgba(0,0,0,0.3);
width: 90%;
max-width: 600px;
position: relative;
}

.modal-content .close-button {
position: absolute;
top: 15px;
right: 15px;
background: none;
border: none;
font-size: 1.5rem; /* Ajustado */
cursor: pointer;
color: #888;
}

#vinculos-modal-body {
padding-top: 10px;
}

#vinculos-modal-body h3 {
margin-top: 15px;
margin-bottom: 8px;
border-bottom: 1px solid #eee;
padding-bottom: 5px;
font-size: 1.1em;
font-weight: 700;
}

#vinculos-modal-body ul {
list-style-type: disc;
padding-left: 20px;
font-size: 13px;
}

#vinculos-modal-body li {
margin-bottom: 5px;
}